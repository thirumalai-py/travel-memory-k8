# Set up the docker 
- Set the docker image without the ENV variables inside the docker file

## Create Docker image
First create a docker image with the current backend code and then push to the docker hub. Don't run docker compose, use only the docker build and generate standalone images to be used on the kubes

### Build image
docker build -t tmbackendkube:1.0 .

### RUN and check with the ENV variables
docker run -d -e MONGO_URI="mongodb+srv://thirumalaipy:SL2OuQmQhJs9UwFP@cluster0.1uz02.mongodb.net/travelmemory?retryWrites=true&w=majority" -e PORT=3001 -p 3001:3001 --name tmbackendk8 tmbackendkube:1.0

### Push the docker image to the Docker hub
docker tag tmbackendkube:1.0  thirumalaipy/tmbackendkube:1.0
docker push thirumalaipy/tmbackendkube:1.0

# Set up the KUBENETES Files

## Step 1: Create Namespace.yml file

## Step 2: Create db-pv.yml

## Step 3: Create db-pvc.yml

## Step 4: Create mongodb-deployment.yml

## Step 5: Create mongodb-service.yml


## Apply the code
kubectl apply -f namespace.yml
kubectl apply -f mongodb-deployment.yml
kubectl apply -f db-pv.yml
kubectl apply -f db-pvc.yml

kubectl get pods -n tmdatabase

minikube 
mongodb://mongodb-service.tmdatabase.svc.cluster.local:27017/tmmern

